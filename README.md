# yamf-remark

Marking exam scripts scanned with the [remark software](https://remarksoftware.com/) using a custom formula.

## Requirements

- Java version 17 or better
- Maven 3 (tested with 3.9.10)

## Building

`mvn package` - this will run test, and create the binary `yamf-remark.jar` in `target/`.

## Usage 

```
java -cp <path-to-built-jar> io.github.yamf.remark.Main
    --input <in>     a file in tab-separated format with answers chosen by
                     student for each question
    --oracle <ocl>   a file in tab-separated format with the correct
                     answers for each question
    --outout <out>   a file where the results will be written to
```

## Structure Of Input Files

### General

Input files are tables, values either characters representing answers, or comma-separated lists of characters
representing multiple answers. 
Values may be in double quotes.
Tables are saved tab-separated (.tsv) format. 

### The Oracle

The oracle table has three rows: 

1. a header row with question ids in columns 2,3, .. 
2. a row with correct answers
3. a row with all possible answers (usually the values are all the same)
4. the first column has descriptive labels

| LABEL | Q1                                            | Q2 | Q3 |
|-------|---|---|---|
| correct | "(b,c)" | "(a,e)" | c |
| all   | "(a,b,c,d,e)" | "(a,b,c,d,e)" | "(a,b,c,d,e)" |

This table needs to be edited manually, but _REMARK_ can be used to generate the first 
two rows from a scan of a correctly completed answer sheet. 

### The Input Data

This is a table generated by _REMARK_. The header row has question ids, the first column 
student identifiers. Non-header rows have the answers selected by students. 


| SID   | Q1            | Q2      | Q3        |
|-------|---------------|---------|-----------|
| 12345 | "(b,d)"       | "(a,e)" | "(a,c,e)" |
| 12346 | "(a,b,c,d,e)" | a       | "(d,e)"   |

## Formula

The formula used is implemented in `io.github.yamf.remark.PartialCreditsAndPartialDeductions`,
the logic used in as follows: 

1. the ratio of correct answers `COR` is computed by dividing the number of selected answers that are correct by the total number of correct answers
1. the ratio of incorrect answers `OCOR` is computed by dividing the number of selected answers that are incorrect by the total number of incorrect answers
2. the mark is computed as `COR-ICOR`, if the result is negative, it is set to zero

